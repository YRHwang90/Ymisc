direction="long")
data2 <- reshape(data,
idvar = "ID",
varying = start:end,
sep="_",
times=c(left_himesphere,right_hemisphere),
direction="long")
data2 <- reshape(data,
idvar = "ID",
varying = start:end,
V.names="Value",
sep="_",
timevar="AI"
times=c(left_himesphere,right_hemisphere),
data2 <- reshape(data,
idvar = "ID",
varying = start:end,
direction="long")
data2 <- reshape(data,
idvar = "ID",
varying = 2:15,
direction="long")
data<-data.frame(ID,weight_hus,weight_wife,height_hus,height_wife)
ID<-1:10
weight_hus<-rnorm(10,0,1)
weight_wife<-rnorm(10,0,1)
height_hus<-rnorm(10,0,1)
height_wife<-rnorm(10,0,1)
data<-data.frame(ID,weight_hus,weight_wife,height_hus,height_wife)
data2<-reshape(data=data,
idvar = "ID",
seperator="_",
direction="long"
)
ID<-1:10
weight_hus<-rnorm(10,0,1)
weight_wife<-rnorm(10,0,1)
height_hus<-rnorm(10,0,1)
height_wife<-rnorm(10,0,1)
data<-data.frame(ID,weight_hus,weight_wife,height_hus,height_wife)
data2<-reshape(data=data,
idvar = "ID",
seperator="_",
direction="long",
v.name=C("body"),
timevar=c("hus",wife)
)
load("C:/Users/user/Desktop/Ymisc/data/sample_data.rda")
data = sample_data
left_hemisphere = "lh"
right_hemisphere = "rh"
seperator="_"
ID="IDD"
start = 1
end = 14
end = 14) {
data$ID<-NULL
data$IDD<-1:100
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
llist<-unique(llist)
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
llist<-list()
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
View(llist)
llist<-unique(llist)
llist
slist
llist<-unique(llist)
for( i in 1:lengh(llist)){
data2[[paste0("AI",seperator,llist[[i]])]] <- (data2[[paste0(left_hemisphere,seperator,llist[[i]])]] - data2[[paste0(left_hemisphere,seperator,llist[[i]])]]) / (data2[[paste0(left_hemisphere,seperator,llist[[i]])]] + data2[[paste0(left_hemisphere,seperator,llist[[i]])]])
}
for( i in 1:length(llist)){
data2[[paste0("AI",seperator,llist[[i]])]] <- (data2[[paste0(left_hemisphere,seperator,llist[[i]])]] - data2[[paste0(left_hemisphere,seperator,llist[[i]])]]) / (data2[[paste0(left_hemisphere,seperator,llist[[i]])]] + data2[[paste0(left_hemisphere,seperator,llist[[i]])]])
}
View(data2)
i = 3
data2[[paste0("AI",seperator,llist[[i]])]]
data2[[paste0(left_hemisphere,seperator,llist[[i]])]]
data2[[paste0(left_hemisphere,seperator,llist[[i]])]]
data2[[paste0(left_hemisphere,seperator,llist[[i]])]]
data2[[paste0(left_hemisphere,seperator,llist[[i]])]]
(data2[[paste0(left_hemisphere,seperator,llist[[i]])]] - data2[[paste0(left_hemisphere,seperator,llist[[i]])]]) / (data2[[paste0(left_hemisphere,seperator,llist[[i]])]] + data2[[paste0(left_hemisphere,seperator,llist[[i]])]])
set.seed(2023)
ID<-1:100
lh_Thalamus <-rnorm(100,8475,650)
lh_Caudate <- rnorm(100,4000,370)
lh_Putamen <- rnorm(100,5480,550)
lh_Pallidum <- rnorm(100,2230,230)
lh_Hippocampus <- rnorm(100,4150,300)
lh_Amygdala  <- rnorm(100,1560,170)
lh_AccumbensArea <- rnorm(100,475,65)
rh_Thalamus <-rnorm(100,8475,650)
rh_Caudate <- rnorm(100,4000,370)
rh_Putamen <- rnorm(100,5480,550)
rh_Pallidum <- rnorm(100,2230,230)
rh_Hippocampus <- rnorm(100,4150,300)
rh_Amygdala  <- rnorm(100,1560,170)
rh_AccumbensArea <- rnorm(100,475,65)
data2[[paste0(left_hemisphere,seperator,llist[[i]])]] - data2[[paste0(left_hemisphere,seperator,llist[[i]])]]
for( i in 1:length(llist)){
data2[[paste0("AI",seperator,llist[[i]])]] <-
(data2[[paste0(left_hemisphere,seperator,llist[[i]])]] - data2[[paste0(right_hemisphere,seperator,llist[[i]])]]) / (data2[[paste0(left_hemisphere,seperator,llist[[i]])]] + data2[[paste0(right_hemisphere,seperator,llist[[i]])]])
}
View(data2)
data4<-data2[,grep("AI", names(data2))]
cbind(data4, data)
View(data)
View(data4)
cbind(data4, data)
data<-cbind(data4, data)
View(data)
View(data)
compute_AI <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
llist<-unique(llist)
for( i in 1:length(llist)){
data2[[paste0("AI",seperator,llist[[i]])]] <-
(data2[[paste0(left_hemisphere,seperator,llist[[i]])]] - data2[[paste0(right_hemisphere,seperator,llist[[i]])]]) / (data2[[paste0(left_hemisphere,seperator,llist[[i]])]] + data2[[paste0(right_hemisphere,seperator,llist[[i]])]])
}
data4<-data2[,grep("AI", names(data2))]
data<-cbind(data,data4)
}
View(sample_data)
data<-compute_AI(sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
start=2 ,
end=15 )
View(data)
compute_AI <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if (hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} if (hemisphere=="suffix"){
data<-compute_AI(sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
start=2 ,
end=15 )
View(data)
data7<-compute_AI(sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
start=2 ,
end=15 )
View(data7)
compute_total <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if (hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} if (hemisphere=="suffix"){
data7<-compute_total(sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix"
start=2 ,
data7<-compute_total(sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start=2 ,
end=15 )
compute_total <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if (hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} if (hemisphere=="suffix"){
data7<-compute_total(sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start=2 ,
end=15 )
compute_total <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if (hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} if (hemisphere=="suffix"){
View(compute_AI)
compute_AI <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if (hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} if (hemisphere=="suffix"){
compute_AI <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if(hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} if(hemisphere=="suffix"){
compute_AI <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if(hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} if(hemisphere=="suffix"){
if(hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
}
hemisphere="prefix"
f(hemisphere=="prefix"){
if(hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
}
compute_AI <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if(hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} if(hemisphere=="suffix"){
compute_AI <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if(hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
}if(hemisphere=="suffix"){
compute_AI <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if(hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} if(hemisphere=="suffix"){
compute_AI <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if(hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} else if(hemisphere=="suffix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][1]
}
}
llist<-unique(llist)
for( i in 1:length(llist)){
data2[[paste0("AI",seperator,llist[[i]])]] <-
(data2[[paste0(left_hemisphere,seperator,llist[[i]])]] - data2[[paste0(right_hemisphere,seperator,llist[[i]])]]) / (data2[[paste0(left_hemisphere,seperator,llist[[i]])]] + data2[[paste0(right_hemisphere,seperator,llist[[i]])]])
}
data4<-data2[,grep("AI", names(data2))]
data<-cbind(data,data4)
}
data7<-compute_AI(sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start=2 ,
end=15 )
compute_total <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if (hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} else if (hemisphere=="suffix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][1]
}
}
llist<-unique(llist)
for( i in 1:length(llist)){
data2[[paste0("total",seperator,llist[[i]])]] <-
data2[[paste0(left_hemisphere,seperator,llist[[i]])]] + data2[[paste0(right_hemisphere,seperator,llist[[i]])]]
}
data4<-data2[,grep("AI", names(data2))]
data<-cbind(data,data4)
}
compute_total <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if (hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} else if (hemisphere=="suffix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][1]
}
}
llist<-unique(llist)
for( i in 1:length(llist)){
data2[[paste0("total",seperator,llist[[i]])]] <-
data2[[paste0(left_hemisphere,seperator,llist[[i]])]] + data2[[paste0(right_hemisphere,seperator,llist[[i]])]]
}
data4<-data2[,grep("total", names(data2))]
data<-cbind(data,data4)
}
data7<-compute_total(sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start=2 ,
end=15 )
View(data7)
data <- data.frame(
pid = c(1, 2, 3),
var1_a = c(10, 20, 30),
var1_b = c(15, 25, 35),
var2_a = c(100, 200, 300),
var2_b = c(150, 250, 350)
)
dat_ind <- function(data) {
# Gather (melt) the data
long_data <- reshape(data, direction = "long", idvar = "pid", varying = list(names(data)[-1]), v.names = "value", timevar = "key", times = names(data)[-1])
# Separate the "key" column into "key" and "indID"
long_data <- transform(long_data, indID = sub(".*_", "", long_data$key), key = sub("_.*", "", long_data$key))
# Spread (cast) the data back to wide format
wide_data <- reshape(long_data, direction = "wide", idvar = c("pid", "indID"), timevar = "key")
return(wide_data)
}
result <- dat_ind(data)
View(result)
View(result)
