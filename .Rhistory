left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start=2 ,
end=15 )
View(data7)
d<-reshape(data=sample_data,
direction="long",
idvar="ID",
varying=2:ncol(sample_data),sep="_")
View(d)
?reshape()
d<-reshape(data=sample_data,
direction="long",
idvar="ID",
varying=2:ncol(sample_data),sep="_",
timevar="region")
View(d)
d<-order(d$ID)
d[order(d[,1])]
d[order(d$ID)]
d<-reshape(data=sample_data,
direction="long",
idvar="ID",
varying=2:ncol(sample_data),sep="_",
timevar="region")
d[order(d$ID)]
d[order(d$ID),]
d[order(d[,1]),]
data<-d[order(d[,1]),]
View(d)
d<-reshape(data=data,
direction="long",
idvar="ID",
varying=2:ncol(sample_data),sep="_",
timevar="region")
d<-reshape(data=sample_data,
direction="long",
idvar="ID",
varying=2:ncol(sample_data),sep="_",
timevar="region")
d<-reshape(data=sample_data,
direction="long",
idvar="ID",
varying=2:15,sep="_",
timevar="region")
View(sample_data)
results<-wide2long(data=sample_data,
ID="ID",
seperator="_",
start=2,
end=15
)
wide2long<-function(data,
ID="ID",
separator="_",
start,
end){
d<-reshape(data=data,
direction="long",
idvar=ID,
varying=start:end,sep=separator,
timevar="region")
data<-d[order(d[,1]),]
return(data)
}
results<-wide2long(data=sample_data,
ID="ID",
seperator="_",
start=2,
end=15
)
results<-wide2long(data=sample_data,
ID="ID",
separator="_",
start=2,
end=15
)
View(results)
View(sample_data)
wide2long<-function(data,
ID="ID",
separator="_",
start,
end){
NID<-match(ID,names(data))
d<-reshape(data=data,
direction="long",
idvar=ID,
varying=start:end,sep=separator,
timevar="region")
data<-d[order(d[,ID]),]
return(data)
}
results<-wide2long(data=sample_data,
ID="ID",
separator="_",
start=2,
end=15
)
View(d)
wide2long<-function(data,
ID="ID",
separator="_",
start,
end){
NID<-match(ID,names(data))
d<-reshape(data=data,
direction="long",
idvar=ID,
varying=start:end,sep=separator,
timevar="region")
data<-d[order(d[,"ID"]),]
return(data)
}
results<-wide2long(data=sample_data,
ID="ID",
separator="_",
start=2,
end=15
)
View(sample_data)
View(results)
wide2long<-function(data,
ID="ID",
separator="_",
start,
end){
NID<-match(ID,names(data))
d<-reshape(data=data,
direction="long",
idvar=ID,
varying=start:end,sep=separator,
timevar="region")
data<-d[order(d[,ID]),]
return(data)
}
#example
results<-wide2long(data=sample_data,
ID="ID",
separator="_",
start=2,
end=15
)
View(results)
NID<-match(ID,names(data))
ID="ID"
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
slist<-strsplit(namelist,split="_")
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
start=2
end=15
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
namelist<-colnames(data[,c(start:end)])
data=sample_data
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data2[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
attention_check<-sample(rep(c("pass","pass","fail","pass"),25))
attention_check
summary(attention_check)
summary(as.factor(attention_check))
set.seed(2023)
ID<-1:100
lh_Thalamus <-rnorm(100,8475,650)
lh_Caudate <- rnorm(100,4000,370)
lh_Putamen <- rnorm(100,5480,550)
lh_Pallidum <- rnorm(100,2230,230)
lh_Hippocampus <- rnorm(100,4150,300)
lh_Amygdala  <- rnorm(100,1560,170)
lh_AccumbensArea <- rnorm(100,475,65)
rh_Thalamus <-rnorm(100,8475,650)
rh_Caudate <- rnorm(100,4000,370)
rh_Putamen <- rnorm(100,5480,550)
rh_Pallidum <- rnorm(100,2230,230)
rh_Hippocampus <- rnorm(100,4150,300)
rh_Amygdala  <- rnorm(100,1560,170)
rh_AccumbensArea <- rnorm(100,475,65)
attention_check<-sample(rep(c("pass","pass","fail","pass"),25))
sample_data <- data.frame(
ID,
lh_Thalamus,
lh_Caudate,
lh_Putamen,
lh_Pallidum,
lh_Hippocampus,
lh_Amygdala,
lh_AccumbensArea,
rh_Thalamus,
rh_Caudate,
rh_Putamen,
rh_Pallidum,
rh_Hippocampus,
rh_Amygdala,
rh_AccumbensArea,
attention_check
)
usethis:: use_data(sample_data, compress="xz",overwrite=TRUE)
wide2long<-function(data,
ID="ID",
separator="_",
hemisphere="prefix",
start,
end){
NID<-match(ID,names(data))
d<-reshape(data=data,
direction="long",
idvar=ID,
varying=start:end,sep=separator,
timevar="region")
data<-d[order(d[,ID]),]
return(data)
}
results<-wide2long(data=sample_data,
ID="ID",
separator="_",
start=2,
end=15
)
View(results)
compute_AI <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if(hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} else if(hemisphere=="suffix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][1]
}
}
llist<-unique(llist)
for( i in 1:length(llist)){
data2[[paste0("AI",seperator,llist[[i]])]] <-
(data2[[paste0(left_hemisphere,seperator,llist[[i]])]] - data2[[paste0(right_hemisphere,seperator,llist[[i]])]]) / (data2[[paste0(left_hemisphere,seperator,llist[[i]])]] + data2[[paste0(right_hemisphere,seperator,llist[[i]])]])
}
data4<-data2[,grep("AI", names(data2))]
data<-cbind(data,data4)
}
compute_AI <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if(hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} else if(hemisphere=="suffix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][1]
}
}
llist<-unique(llist)
for( i in 1:length(llist)){
data2[[paste0("AI",seperator,llist[[i]])]] <-
(data2[[paste0(left_hemisphere,seperator,llist[[i]])]] - data2[[paste0(right_hemisphere,seperator,llist[[i]])]]) / (data2[[paste0(left_hemisphere,seperator,llist[[i]])]] + data2[[paste0(right_hemisphere,seperator,llist[[i]])]])
}
data4<-data2[,grep("AI", names(data2))]
data<-cbind(data,data4)
return(data)
}
data7<-compute_AI(sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start=2 ,
end=15 )
View(data7)
load("C:/Users/user/Desktop/Ymisc/data/sample_data.rda")
wide2long<-function(data,
ID="ID",
separator="_",
hemisphere="prefix",
start,
end){
d<-reshape(data=data,
direction="long",
idvar=ID,
varying=start:end,sep=separator,
timevar="region")
data<-d[order(d[,ID]),]
return(data)
}
results<-wide2long(data=sample_data,
ID="ID",
separator="_",
start=2,
end=15
)
View(results)
long2wide<-function(data,
ID="ID",
separator="_",
hemisphere="prefix",
start,
end){
d<-reshape(data=data,
direction="wide",
idvar=ID,
varying=start:end,sep=separator,
timevar="region")
data<-d[order(d[,ID]),]
return(data)
}
d<-reshape(data=results,
direction="wide",
idvar="ID",
varying=c(3:5),
timevar="region")
d<-reshape(data=results,
direction="wide",
idvar="ID",
varying=c(3:5),
timevar=c("lh",rh))
d<-reshape(data=results,
direction="wide",
idvar="ID",
varying=c(3:5),
timevar=c("lh","rh"))
d<-reshape(data=results,
direction="wide",
idvar="ID",
timevar=c("lh","rh"))
View(d)
d<-reshape(data=results,
direction="wide",
idvar="ID",
varying=2:ncol(results),
timevar=c("lh","rh"))
View(d)
d<-reshape(data=results,
direction="wide",
idvar="ID",
timevar=c("lh","rh"))
View(d)
d<-reshape(data=results,
direction="wide",
idvar="ID",
varying=c(3:5),
timevar=c("lh","rh"))
d<-reshape(data=results,
direction="wide",
idvar="ID",
varying=c(3:5),
timevar=c("region",lh","rh"))
d<-reshape(data=results,
direction="wide",
idvar="ID",
varying=c(3:5),
timevar=c("region","lh","rh"))
d<-reshape(data=results,
direction="wide",
idvar=c("ID","attention_check")
varying=c(3:5),
d<-reshape(data=results,
direction="wide",
idvar=c("ID","attention_check")
timevar=c("region","lh","rh"))
d<-reshape(data=results,
direction="wide",
idvar=c("ID","attention_check")
timevar=c("lh","rh"))
d<-reshape(data=results,
direction="wide",
idvar=c("ID","attention_check"),
timevar = c("rh","lh")
)
?reshape()
?wide()
?wide
??wide
?reshape()
load("C:/Users/user/Desktop/Ymisc/data/sample_data.rda")
compute_AI <- function(data = sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start ,
end  ) {
NID<-match(ID,names(data))
data2<-data[,c(start:end,NID)]
namelist<-colnames(data[,c(start:end)])
slist<-strsplit(namelist,split="_")
llist<-list()
if(hemisphere=="prefix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][2]
}
} else if(hemisphere=="suffix"){
for(i in 1:length(slist)){
llist[i]<-  slist[[i]][1]
}
}
llist<-unique(llist)
for( i in 1:length(llist)){
data2[[paste0("AI",seperator,llist[[i]])]] <-
(data2[[paste0(left_hemisphere,seperator,llist[[i]])]] - data2[[paste0(right_hemisphere,seperator,llist[[i]])]]) / (data2[[paste0(left_hemisphere,seperator,llist[[i]])]] + data2[[paste0(right_hemisphere,seperator,llist[[i]])]])
}
data4<-data2[,grep("AI", names(data2))]
data<-cbind(data,data4)
return(data)
}
data7<-compute_AI(sample_data,
left_hemisphere = "lh",
right_hemisphere = "rh",
seperator="_",
ID="ID",
hemisphere="prefix",
start=2 ,
end=15 )
View(data7)
load("C:/Users/user/Desktop/Ymisc/data/sample_data.rda")
results<-wide2long(data=sample_data,
ID="ID",
separator="_",
start=2,
end=15
)
wide2long<-function(data,
ID="ID",
separator="_",
hemisphere="prefix",
start,
end){
d<-reshape(data=data,
direction="long",
idvar=ID,
varying=start:end,sep=separator,
timevar="region")
data<-d[order(d[,ID]),]
return(data)
}
results<-wide2long(data=sample_data,
ID="ID",
separator="_",
start=2,
end=15
)
View(results)
View(results)
set.seed(2023)
ID<-c(1,1,2,2,3,3,4,4,5,5)
State<-c("NY","NY","NC","NC","TX","TX","VA","VA","SC","SC")
Gender<-c("Husband","Wife","Husband","Wife","Husband","Wife","Husband","Wife","Husband","Wife")
stress<-rnorm(10,0,1)
satisfaction<-rnorm(10,0,1)
data<-data.frame(ID,State,Gender,state,satisfaction)
data<-data.frame(ID,State,Gender,State,satisfaction)
set.seed(2023)
ID<-c(1,1,2,2,3,3,4,4,5,5)
State<-c("NY","NY","NC","NC","TX","TX","VA","VA","SC","SC")
Gender<-c("Husband","Wife","Husband","Wife","Husband","Wife","Husband","Wife","Husband","Wife")
stress<-rnorm(10,0,1)
satisfaction<-rnorm(10,0,1)
data<-data.frame(ID,State,Gender,State,satisfaction)
set.seed(2023)
ID<-c(1,1,2,2,3,3,4,4,5,5)
State<-c("NY","NY","NC","NC","TX","TX","VA","VA","SC","SC")
Gender<-c("Husband","Wife","Husband","Wife","Husband","Wife","Husband","Wife","Husband","Wife")
stress<-rnorm(10,0,1)
satisfaction<-rnorm(10,0,1)
data<-data.frame(ID,State,Gender,stress,satisfaction)
View(data)
set.seed(2023)
ID<-c(1,1,2,2,3,3,4,4,5,5)
State<-c("NY","NY","NC","NC","TX","TX","VA","VA","SC","SC")
Gender<-c("Husband","Wife","Husband","Wife","Husband","Wife","Husband","Wife","Husband","Wife")
stress<-rnorm(10,0,1)
satisfaction<-rnorm(10,0,1)
data<-data.frame(ID,State,Gender,stress,satisfaction)
ID<-1:5
State<-c("NY","NC","TX","VA","SC"),
ID<-1:5
State<-c("NY","NC","TX","VA","SC")
Husband_stress<-rnorm(5,0,1)
Wife_stress<-rnorm(5,0,1)
Husband_satisfaction<-rnorm(5,0,1)
Wife_satisfaction<-rnorm(5,0,1)
results<-data.frame(ID,State,Husband_stress,Wife_stress,Husband_satisfaction,Wife_satisfaction)
View(results)
